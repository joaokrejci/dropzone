{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n/* global window, localStorage */\n\n\nvar hasStorage = false;\n\ntry {\n  hasStorage = 'localStorage' in window; // Attempt to store and read entries from the local storage to detect Private\n  // Mode on Safari on iOS (see #49)\n\n  var key = 'tusSupport';\n  localStorage.setItem(key, localStorage.getItem(key));\n} catch (e) {\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\n  // thrown (see #49)\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\n    hasStorage = false;\n  } else {\n    throw e;\n  }\n}\n\nexport var canStoreURLs = hasStorage;\nexport var WebStorageUrlStorage = /*#__PURE__*/function () {\n  function WebStorageUrlStorage() {\n    _classCallCheck(this, WebStorageUrlStorage);\n  }\n\n  _createClass(WebStorageUrlStorage, [{\n    key: \"findAllUploads\",\n    value: function findAllUploads() {\n      var results = this._findEntries('tus::');\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      var results = this._findEntries(\"tus::\".concat(fingerprint, \"::\"));\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      localStorage.removeItem(urlStorageKey);\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      var id = Math.round(Math.random() * 1e12);\n      var key = \"tus::\".concat(fingerprint, \"::\").concat(id);\n      localStorage.setItem(key, JSON.stringify(upload));\n      return Promise.resolve(key);\n    }\n  }, {\n    key: \"_findEntries\",\n    value: function _findEntries(prefix) {\n      var results = [];\n\n      for (var i = 0; i < localStorage.length; i++) {\n        var _key = localStorage.key(i);\n\n        if (_key.indexOf(prefix) !== 0) continue;\n\n        try {\n          var upload = JSON.parse(localStorage.getItem(_key));\n          upload.urlStorageKey = _key;\n          results.push(upload);\n        } catch (e) {// The JSON parse error is intentionally ignored here, so a malformed\n          // entry in the storage cannot prevent an upload.\n        }\n      }\n\n      return results;\n    }\n  }]);\n\n  return WebStorageUrlStorage;\n}();","map":{"version":3,"sources":["/home/joao/Projects/iconect_test/dropzone/node_modules/tus-js-client/lib.esm/browser/urlStorage.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","hasStorage","window","localStorage","setItem","getItem","e","code","SECURITY_ERR","QUOTA_EXCEEDED_ERR","canStoreURLs","WebStorageUrlStorage","value","findAllUploads","results","_findEntries","Promise","resolve","findUploadsByFingerprint","fingerprint","concat","removeUpload","urlStorageKey","removeItem","addUpload","upload","id","Math","round","random","JSON","stringify","prefix","_key","indexOf","parse","push"],"mappings":"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","sourcesContent":["function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/* global window, localStorage */\nvar hasStorage = false;\n\ntry {\n  hasStorage = 'localStorage' in window; // Attempt to store and read entries from the local storage to detect Private\n  // Mode on Safari on iOS (see #49)\n\n  var key = 'tusSupport';\n  localStorage.setItem(key, localStorage.getItem(key));\n} catch (e) {\n  // If we try to access localStorage inside a sandboxed iframe, a SecurityError\n  // is thrown. When in private mode on iOS Safari, a QuotaExceededError is\n  // thrown (see #49)\n  if (e.code === e.SECURITY_ERR || e.code === e.QUOTA_EXCEEDED_ERR) {\n    hasStorage = false;\n  } else {\n    throw e;\n  }\n}\n\nexport var canStoreURLs = hasStorage;\nexport var WebStorageUrlStorage = /*#__PURE__*/function () {\n  function WebStorageUrlStorage() {\n    _classCallCheck(this, WebStorageUrlStorage);\n  }\n\n  _createClass(WebStorageUrlStorage, [{\n    key: \"findAllUploads\",\n    value: function findAllUploads() {\n      var results = this._findEntries('tus::');\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"findUploadsByFingerprint\",\n    value: function findUploadsByFingerprint(fingerprint) {\n      var results = this._findEntries(\"tus::\".concat(fingerprint, \"::\"));\n\n      return Promise.resolve(results);\n    }\n  }, {\n    key: \"removeUpload\",\n    value: function removeUpload(urlStorageKey) {\n      localStorage.removeItem(urlStorageKey);\n      return Promise.resolve();\n    }\n  }, {\n    key: \"addUpload\",\n    value: function addUpload(fingerprint, upload) {\n      var id = Math.round(Math.random() * 1e12);\n      var key = \"tus::\".concat(fingerprint, \"::\").concat(id);\n      localStorage.setItem(key, JSON.stringify(upload));\n      return Promise.resolve(key);\n    }\n  }, {\n    key: \"_findEntries\",\n    value: function _findEntries(prefix) {\n      var results = [];\n\n      for (var i = 0; i < localStorage.length; i++) {\n        var _key = localStorage.key(i);\n\n        if (_key.indexOf(prefix) !== 0) continue;\n\n        try {\n          var upload = JSON.parse(localStorage.getItem(_key));\n          upload.urlStorageKey = _key;\n          results.push(upload);\n        } catch (e) {// The JSON parse error is intentionally ignored here, so a malformed\n          // entry in the storage cannot prevent an upload.\n        }\n      }\n\n      return results;\n    }\n  }]);\n\n  return WebStorageUrlStorage;\n}();"]},"metadata":{},"sourceType":"module"}